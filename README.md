# Date me please
Этот проект представляет собой API сервиса для поиска своей второй половинки.


## Как пользоваться API
Система предоставляет два способа тестирования API:

1. Встроенная панель Django REST Framework с самоописывающим API.
2. Подключенный для более удобного и привычного многим тестирования Swagger. 

Чтобы воспользоваться первым вариантом, просто сделайте GET-запрос на нужный вам эндпоинт.
Чтобы воспользоваться вторым вариантом, вы можете сделать GET-запрос по шаблонному пути ```/api/doc```.

> СОВЕТ:
> Используйте Swagger для ознакомления с API и его структурой, а панель DRF - для непосредственного тестирования.

## Описание API
Здесь вы сможете подробнее узнать о функционале сервиса.

#### Доступ к API
Некоторые эндпоинты защищены от неавторизованных пользователей. Чтобы получить к ним доступ, создайте пользователя и авторизируйтесь.

> СОВЕТ:
> Перед использованием API создайте и авторизируйте пользователя.

#### Регистрация пользователей
При использовании Swagger'a для регистрации пользователю понадобится указать его гендер, аватар, долготу и широту. Все эти данные указываются в поле ```profile```. Однако это неудобный способ, т.к. все данные придется записывать вручную. Панель DRF предоставляет удобную форму для регистрации пользователей по адресу ```/api/clients/create```.

> СОВЕТ:
> Используйте панель DRF по адресу ```/api/clients/create``` для регистарции пользователей с помощью формы.

#### Оценивание участников
Каждый участник может оценить другого участника по ```/api/clients/{id}/match```.
При этом оценивший участник попадает в так называемый "список влюбленных" участника, которого он оценил.
Каждый участник может проверить этот список по адресу ```/api/clients/me/lovers```.
Если пользователь оценит кого-то в ответ из этого списка, он получит об этом сообщение и почту человека, которого он оценил в ответ. При этом на почты участников отправятся письма о взаимной симпатии.

#### Фильтрация списка пользователей
Список пользователей можно фильтровать по заданным параметрам.
Особое внимание стоит уделить параметру дистанции. В параметре ```distance_to_user``` указывается максимально допустимое расстояние от пользователя в километрах. Когда вы отправляете запрос ```/api/list/?distance_to_user={some_value}```, с помощьюй функций СУБД для каждого пользователя высчитывается расстояние на основе координат текущего пользователя и его самого. Дистанция пользователя с ним самим, разумеется, равна 0.0.
